<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="utf-8">
<title>JSONP原理2</title>
<script src="//code.jquery.com/jquery-1.9.1.js"></script>
<script>
/*
// 得到航班信息查询结果后的回调函数
var flightHandler = function(data){
    alert('你查询的航班结果是：票价 ' + data.price + ' 元，' + '余票 ' + data.tickets + ' 张。');
};
// 提供jsonp服务的url地址（不管是什么类型的地址，最终生成的返回值都是一段javascript代码）
//var url = "http://flightQuery.com/jsonp/flightResult.aspx?code=CA1998&callback=flightHandler";
var url = "//pandoraui.github.io/learning-javascript/json/jsonp.js";


// 创建script标签，设置其属性
var script = document.createElement('script');
script.setAttribute('src', url);
// 把script标签加入head，此时调用开始
document.getElementsByTagName('head')[0].appendChild(script); 

*/

jQuery(document).ready(function(){ 
    $.ajax({
        type: "get",
        async: false,
        url: "//pandoraui.github.io/learning-javascript/json/jsonp.js",
        dataType: "jsonp",
        jsonp: "callback",//传递给请求处理程序或页面的，用以获得jsonp回调函数名的参数名(一般默认为:callback)
        jsonpCallback:"flightHandler",//自定义的jsonp回调函数名称，默认为jQuery自动生成的随机函数名，也可以写"?"，jQuery会自动为你处理数据
        success: function(json){
            alert('您查询到航班信息：票价： ' + json.price + ' 元，余票： ' + json.tickets + ' 张。');
        },
        error: function(){
            alert('fail');
        }
    });
 });






</script>



</head>
<body>
    
    <p>本文摘自：<a href="http://www.cnblogs.com/dowinning/archive/2012/04/19/json-jsonp-jquery.html">【原创】说说JSON和JSONP，也许你会豁然开朗，含jQuery用例</a></p>
    
    <p>效果参看控制台及源码</p>
    
</body>
</html>